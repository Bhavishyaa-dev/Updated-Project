// Movie posters
const moviePosters = {
    // New Releases Section
    'Spider-Man No Way Home': 'https://image.tmdb.org/t/p/w500/1g0dhYtq4irTY1GPXvft6k4YLjm.jpg',
    'The Black Phone': 'https://image.tmdb.org/t/p/w500/bxHZpV02OOu9vq3sb3MsOudEnYc.jpg',
    'Jurassic World Dominion': 'https://image.tmdb.org/t/p/w500/kAVRgw7GgK1CfYEJq8ME6EvRIgU.jpg',
    'Minions: The Rise of Gru': 'https://image.tmdb.org/t/p/w500/wKiOkZTN9lUUUNZLmtnwubZYONg.jpg',
    'The Irishman': 'https://image.tmdb.org/t/p/w500/mbm8k3GFhXS0ROd9AD1gqYbIFbM.jpg',
    'Matrix Resurrection': 'https://image.tmdb.org/t/p/w500/8c4a8kE7PizaGQQnditMmI1xbRp.jpg',
    'Hustle': 'https://image.tmdb.org/t/p/w500/fVf4YHHkRfo1uuljpWBViEGmaUQ.jpg',
    'Rebecca': 'https://image.tmdb.org/t/p/w500/bSKVKcCXdKxkbgf0LL8lBTPG02e.jpg',
    'Joker': 'https://image.tmdb.org/t/p/w500/udDclJoHjfjb8Ekgsd4FDteOkCU.jpg',
    'Extraction': 'https://image.tmdb.org/t/p/w500/nygOUcBUPH6G4SCfqzfLWWw6hIN.jpg',
    'Anna': 'https://image.tmdb.org/t/p/w500/pPJ6uMOlAEkjf2BrUrzKSo0sRgl.jpg',
    'Doctor Strange': 'https://image.tmdb.org/t/p/w500/uGBVj3bEbCoZbDjjl9wTxcygko1.jpg',

    // Movies Section
    'Blackout': 'https://image.tmdb.org/t/p/w500/xDgnYq8N5sxvZ2d9q5nE9N0DxNA.jpg',
    'Prey': 'https://image.tmdb.org/t/p/w500/ujr5pztc1oitbe7ViMUOilFaJ7s.jpg',
    'John Wick: Chapter 3': 'https://image.tmdb.org/t/p/w500/ziEuG1essDuWuC5lpWUaw1uXY2O.jpg',
    'Sonic the Hedgehog 2': 'https://image.tmdb.org/t/p/w500/6DrHO1jr3qVrViUO6s6kFiAGM7.jpg',
    'Once Upon Time in America': 'https://image.tmdb.org/t/p/w500/i0enkzsL5dHdXfGgkt0uJJPB5Gh.jpg',
    'Resident Evil': 'https://image.tmdb.org/t/p/w500/1UkbPQspPbq1FPbFP4VV1ELCfSN.jpg',
    'Narvik: Hitler\'s First Defeat': 'https://image.tmdb.org/t/p/w500/gU4Y3Ggk2uR6WmtC4J4RR0PErnr.jpg',
    'Venom: Let There Be Carnage': 'https://image.tmdb.org/t/p/w500/rjkmN1dniUHVYAtwuV3Tji7FsDO.jpg',
    'Tenet': 'https://image.tmdb.org/t/p/w500/k68nPLbIST6NP96JmTxmZijEvCA.jpg',
    'The Godfather': 'https://image.tmdb.org/t/p/w500/3bhkrj58Vtu7enYsRolD1fZdja1.jpg',
    'Shershaah': 'https://image.tmdb.org/t/p/w500/kxbKhw4GQ7L2pZwiCwjGEzSvzDg.jpg',
    'Eternals': 'https://image.tmdb.org/t/p/w500/bcCBq9N1EMo3daNIjWJ8kYvrQm6.jpg'
};

// Movie backgrounds
const movieBackgrounds = {
    'Spider-Man: No Way Home': 'https://image.tmdb.org/t/p/original/14QbnygCuTO0vl7CAFmPf1fgZfV.jpg',
    'Matrix Resurrection': 'https://image.tmdb.org/t/p/original/hv7o3VgfsairBoQFAawgaQ4cR1K.jpg',
    'Thor: Love and Thunder': 'https://image.tmdb.org/t/p/original/p1F51Lvj3sMopG948F5HsBbl43C.jpg',
    'The Batman': 'https://image.tmdb.org/t/p/original/5P8SmMzSNYikXpxil6BYzJ16611.jpg'
};

// TV Series posters
const tvPosters = {
    'Breaking Bad': 'https://image.tmdb.org/t/p/w500/ggFHVNu6YYI5L9pCfOacjizRGt.jpg',
    'Game of Thrones': 'https://image.tmdb.org/t/p/w500/u3bZgnGQ9T01sWNhyveQz0wH0Hl.jpg',
    'How I Met Your Mother': 'https://image.tmdb.org/t/p/w500/b34jPzmB0wZy7EjUZoleXOl2RRI.jpg',
    'Friends': 'https://image.tmdb.org/t/p/w500/f496cm9enuEsZkSPzCwnTESEK5s.jpg',
    'Wednesday': 'https://image.tmdb.org/t/p/w500/9PFonBhy4cQy7Jz20NpMygczOkv.jpg',
    'Mr. Robot': 'https://image.tmdb.org/t/p/w500/oKIBhzZzDX07SoE2bOLhq2EE8rf.jpg',
    'Witcher': 'https://image.tmdb.org/t/p/w500/7vjaCdMw15FEbXyLQTVa04URsPm.jpg',
    'Narcos': 'https://image.tmdb.org/t/p/w500/rTmal9fDbwh5nEWls7vknqh8VSQ.jpg',
    'Better Call Saul': 'https://image.tmdb.org/t/p/w500/fC2HDm5t0kHl7mTm7jxMR31b7by.jpg',
    'Dark': 'https://image.tmdb.org/t/p/w500/apbrbWs8M9lyOpJYU5WXrpFbk1Z.jpg'
};

// Animated Movies posters
const animatedPosters = {
    'The Addams Family': 'https://image.tmdb.org/t/p/w500/q1epO0eO8DWu8Vo8tPfvVlzW48T.jpg',
    'How To Train Your Dragon': 'https://image.tmdb.org/t/p/w500/ygGmAO60t8GyqUo9xYeYxSZAR3b.jpg',
    'Encanto': 'https://image.tmdb.org/t/p/w500/4j0PNHkMr5ax3IA8tjtxcmPU3QT.jpg',
    'Incredibles 2': 'https://image.tmdb.org/t/p/w500/9lFKBtaVIhP7E2Pk0IY6GaHIfI2.jpg',
    'Lion King': 'https://image.tmdb.org/t/p/w500/dzBtMocZuJbjLOXvrl4zGYigDzh.jpg',
    'Ron\'s Gone Wrong': 'https://image.tmdb.org/t/p/w500/gA9QxSravC2EVEkEKgyEmDrfL0e.jpg',
    'Scoob!': 'https://image.tmdb.org/t/p/w500/jHo2M1OiH9Re33jYtUQdfzPeUkx.jpg',
    'The Sea Beast': 'https://image.tmdb.org/t/p/w500/9Zfv4Ap1e8eKOYnZPtYaWhLkk0d.jpg',
    'Wendell & Wild': 'https://image.tmdb.org/t/p/w500/1QYqyN8h2Wy7UuHHwgqHhKwuYja.jpg',
    'The Mitchells vs The Machines': 'https://image.tmdb.org/t/p/w500/lr4tg0M3Yzs3qJhWKkNzGe3VB9i.jpg'
};

// Load images for all cards
function loadImages() {
    // Load movie posters
    document.querySelectorAll('.cards').forEach(card => {
        const titleElement = card.querySelector('.card-title h3');
        if (!titleElement) return;

        const title = titleElement.textContent;
        const imgElement = card.querySelector('.card-img img');
        if (!imgElement) {
            // Create img element if it doesn't exist
            const newImg = document.createElement('img');
            card.querySelector('.card-img').insertBefore(newImg, card.querySelector('.img-title'));
            imgElement = newImg;
        }

        const posterUrl = moviePosters[title] || tvPosters[title] || animatedPosters[title];
        if (posterUrl) {
            imgElement.src = posterUrl;
            imgElement.alt = title;
            
            // Add loading class
            imgElement.classList.add('loading');
            
            // Handle load and error events
            imgElement.onload = () => {
                imgElement.classList.remove('loading');
                card.classList.add('loaded');
            };
            
            imgElement.onerror = () => {
                imgElement.classList.add('error');
                card.classList.remove('loaded');
                // Set a fallback image or gradient
                imgElement.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="450" viewBox="0 0 300 450"><rect width="100%" height="100%" fill="%23141414"/></svg>';
            };
        }
    });

    // Load background images for slider
    document.querySelectorAll('.swiper-slide').forEach(slide => {
        const titleElement = slide.querySelector('.movie-title h2');
        if (!titleElement) return;

        const title = titleElement.textContent;
        const backgroundUrl = movieBackgrounds[title];
        if (backgroundUrl) {
            slide.style.backgroundImage = `url('${backgroundUrl}')`;
        }
    });
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', loadImages);

// Retry loading failed images
window.addEventListener('load', () => {
    document.querySelectorAll('.card-img img.error').forEach(img => {
        img.src = img.src; // Retry loading
    });
}); 